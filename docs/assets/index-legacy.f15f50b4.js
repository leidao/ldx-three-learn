!function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var t=document.createElement("style");t.innerHTML='#--unocss-hash--{content:"aa9d1343"}\n',document.head.appendChild(t),System.register(["./index-legacy.79abdf94.js","./LoadingBar-legacy.c6dd5fb4.js","./GLTFLoader-legacy.a5f34d4a.js"],(function(t){"use strict";var r,i,a,o,s,c,d,l,h,u,f,v,g,m,w,p;return{setters:[function(e){r=e.r,i=e.j},function(e){a=e.R,o=e.L,s=e.e,c=e.f,d=e.P,l=e.W,h=e.O,u=e.g,f=e.D,v=e.aE,g=e.h,m=e.i,w=e.aI},function(e){p=e.G}],execute:function(){var b=13552587,y=16777215,L=function(){function t(e){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"scene",void 0),n(this,"camera",void 0),n(this,"renderer",void 0),n(this,"controls",void 0),n(this,"raycaster",void 0),n(this,"gltfLoader",void 0),n(this,"container",void 0),n(this,"directionalLight",void 0),n(this,"loadmanager",void 0),n(this,"loadingBar",void 0),n(this,"onProgress",void 0),n(this,"useOrbitControls",(function(){r.controls=new g(r.camera,r.renderer.domElement),r.controls.maxPolarAngle=.4*Math.PI,r.controls.minDistance=15,r.controls.maxDistance=100,r.controls.enablePan=!1,r.controls.addEventListener("change",(function(){r.render()}))})),n(this,"render",(function(){r.renderer.render(r.scene,r.camera)})),n(this,"onResize",(function(){var e=r.container.getBoundingClientRect(),n=e.width,t=e.height,i=n/t;r.renderer.setSize(n,t),r.camera.aspect=i,r.camera.updateProjectionMatrix(),r.render()})),n(this,"listen",(function(){window.addEventListener("resize",r.onResize)})),n(this,"destroy",(function(){window.removeEventListener("resize",r.onResize)})),this.container=e,this.initScene(),this.raycaster=new a,this.loadingBar=new o}var r,i,L;return r=t,(i=[{key:"initScene",value:function(){var e=this.container.getBoundingClientRect(),n=e.width,t=e.height;this.scene=new s,this.scene.background=new c(11184810);var r=n/t;this.camera=new d(45,r,1,1e3),this.camera.up.y=1;var i=this.scene.position;this.camera.lookAt(i),this.camera.position.set(80,30,-30),this.renderer=new l({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(n,t),this.renderer.shadowMap.enabled=!1,this.container.appendChild(this.renderer.domElement);var a=new h;a.position.set(0,0,0);var o=new u(b,1);o.position.set(0,20,0),this.scene.add(o);var g=new f(y,2);g.position.set(30,100,50),g.target=a,this.scene.add(g);var m=new f(y,1);m.position.set(0,20,-50),m.target=a,this.scene.fog=new v(11184810,110,160),this.restoreContext()}},{key:"restoreContext",value:function(){var e=this;this.renderer.domElement.addEventListener("webglcontextlost",(function(n){n.preventDefault(),setTimeout((function(){e.renderer.forceContextRestore()}),1)}))}},{key:"useLoadingManager",value:function(){var e=this,n=new Map;this.loadmanager=new m,this.loadmanager.onStart=function(){e.loadingBar.visible=!0},this.loadmanager.onLoad=function(){e.loadingBar.visible=!1},this.loadmanager.onError=function(e){console.log("资源加载出错：",e)},this.onProgress=function(t,r){var i=n.get(t);i?(i.loaded=r.loaded,i.total=r.total):n.set(t,{loaded:r.loaded,total:r.total}),e.loadingBar.update(n)}}},{key:"loadServiceArea",value:function(){var e=this;this.gltfLoader=new p(this.loadmanager),this.gltfLoader.setPath("serviceArea/glb/"),this.gltfLoader.load("serviceArea.glb",(function(n){e.scene.add(n.scene),n.scene.traverse((function(e){if(e.isMesh){if("平面001"===e.name){var n=new w({map:e.material.map});e.material=n}"平面003"===e.name&&(e.material=new w({color:"#545454"}))}})),e.render()}),(function(n){e.onProgress("serviceArea.glb",n)}))}}])&&e(r.prototype,i),L&&e(r,L),Object.defineProperty(r,"prototype",{writable:!1}),t}();t("default",(function(){var e=r.exports.useRef(null);return r.exports.useEffect((function(){if(e.current){var n=new L(e.current);n.useOrbitControls(),n.listen(),n.useLoadingManager(),n.loadServiceArea()}}),[]),i("div",{className:"w-100% h-100% relative",children:i("div",{className:"gunplay w-100% h-100%",ref:e})})}))}}}))}();
