!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var a=document.createElement("style");a.innerHTML='#--unocss-hash--{content:"553b441b"}\n',document.head.appendChild(a),System.register(["./index-legacy.bfa24770.js","./index-legacy.982a8151.js","./CSS3DRenderer-legacy.c6acab82.js"],(function(e){"use strict";var n,o,a,s,c,l,u,d,f,p,v,h,m,y,g,b,w;return{setters:[function(e){n=e.r,o=e.b,a=e.j},function(e){s=e.G,c=e.C,l=e.T,u=e.F,d=e.s,f=e.g,p=e.ao,v=e.M,h=e.ay,m=e.H,y=e.al,g=e.c},function(e){b=e.C,w=e.b}],execute:function(){var x="/ldx-three-learn/nebularOrbit/img/point.png",R=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"clock",void 0),i(this,"viewer",void 0),i(this,"css3Render",void 0),i(this,"textLoader",void 0),i(this,"fileLoader",void 0),i(this,"group",new s),i(this,"isRotate",!0),i(this,"onResize",(function(){var e=n.viewer.container.getBoundingClientRect(),t=e.width,r=e.height,i=t/r;n.viewer.renderer.setSize(t,r),n.css3Render.setSize(t,r),n.viewer.camera.aspect=i,n.viewer.camera.updateProjectionMatrix(),n.render()})),i(this,"listen",(function(){window.addEventListener("resize",n.onResize)})),i(this,"destroy",(function(){window.removeEventListener("resize",n.onResize)})),i(this,"update",(function(){var e=n.clock.getDelta();n.isRotate&&n.group.rotateZ(.1*e),n.render()})),this.viewer=t,this.clock=new c,this.group=new s,this.group.rotation.set(-Math.PI/2.6,-Math.PI/8,0),this.group.position.set(10,30,0),this.group.scale.set(1.16,1.16,1.16),t.scene.add(this.group),this.textLoader=new l,this.textLoader.setCrossOrigin(""),this.fileLoader=new u,this.init()},(t=[{key:"init",value:function(){var e=this.viewer.container.getBoundingClientRect(),t=e.width,n=e.height;this.css3Render=new b,this.css3Render.setSize(t,n),this.css3Render.domElement.style.position="absolute",this.css3Render.domElement.style.pointerEvents="none",this.css3Render.domElement.style.top="0px",this.css3Render.domElement.style.left="0px";var r=this.css3Render.domElement;r.id="css3Render",this.viewer.container.appendChild(r),this.loadSky(),this.createCircle(),this.createRing(),this.createLine()}},{key:"render",value:function(){var e;this.viewer.render(),null===(e=this.css3Render)||void 0===e||e.render(this.viewer.scene,this.viewer.camera)}},{key:"loadSky",value:function(){var e=this;this.textLoader.setPath("nebularOrbit/img/"),this.textLoader.load("背景星空图.png",(function(t){e.viewer.scene.background=t,e.render()}))}},{key:"createCircle",value:function(){var e=this;this.textLoader.setPath("nebularOrbit/img/"),this.textLoader.load("生平-背景圈.png",(function(t){t.encoding=d;var n=new f({map:t,transparent:!0,opacity:.5}),r=new p(230,240),i=new v(r,n);i.rotation.set(0,0,0),e.group.add(i),e.render()}))}},{key:"createRing",value:function(){var e=new h(80,80.8,200),t=new f({color:16777215,side:m,transparent:!0,opacity:.4}),n=new v(e,t);n.position.set(0,0,-1),this.group.add(n)}},{key:"createLine",value:function(){var e=this;this.fileLoader.setPath("nebularOrbit/data/"),this.fileLoader.load("孔子生平.json",(function(t){for(var n,r=(JSON.parse(t)||{}).lifetime||[],i=new y(0,0,80.5,1.6,1.6+2*Math.PI,!1).getPoints(270),o=[],a=0;a<27;a++){var s=10*a;o.push(i[s])}for(var c=function(){var t=o[l],i=e.createPoint(r[l],l);i.element.addEventListener("click",(function(){if(n){var t=n.getElementsByClassName("circle-img")[0];t.src=x,t.style.transform="scale(1)"}var o=i.element.getElementsByClassName("circle-img")[0];o.src="/ldx-three-learn/nebularOrbit/img/point_active.png",o.style.transform="scale(2)",n=i.element;var a=+(i.element.getAttribute("_pointIndex")||0),s=r[a];e.viewer.emit("point_click",s)})),i.element.addEventListener("mouseenter",(function(){e.isRotate=!1})),i.element.addEventListener("mouseleave",(function(){e.isRotate=!0})),i.position.set(t.x,t.y,0),e.group.add(i),e.render()},l=0;l<o.length;l++)c()}))}},{key:"createPoint",value:function(e,t){var n=document.createElement("div");n.setAttribute("_pointIndex",t);var r='\n  <div style="position:relative;top:10px;left:0;width:60px;height:60px;cursor: pointer;">\n    <img class="circle-img" width=60 height=60 style="position:relative;top:0;left:0;transition:0.5s;" src=\''.concat(x,'\' />\n    <div class="circle-text" style="width:80px;position:relative;top:-18px;left:0;color:#fff; text-align: center;font-size:12px">').concat(e.time,"</div>\n  </div>\n");n.innerHTML=r;var i=new w(n);return i.userData.index=t,i.scale.set(.1,.1,.1),i.userData.isCss23D=!0,i}},{key:"creatPlan",value:function(){var e=this;this.textLoader.setPath("nebularOrbit/img/"),this.textLoader.load("星球.png",(function(t){var n=new f({transparent:!0,opacity:.8,side:m,map:t}),r=new p(200,200),i=new v(r,n);e.viewer.scene.add(i)}))}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e("default",(function(){var e=n.exports.useRef(null),r=t(n.exports.useState(),2),i=r[0],s=r[1];return n.exports.useEffect((function(){if(e.current){var t=new g(e.current);t.on("point_click",(function(e){s(e)}));var n,r=new R(t);return function e(){r.update(),n=requestAnimationFrame(e)}(),function(){cancelIdleCallback(n)}}}),[]),o("div",{className:"w-100% h-100% relative",children:[a("div",{className:"gunplay w-100% h-100%",ref:e}),(null==i?void 0:i.time)&&o("div",{className:"absolute left-40px top-20px z-999 text-#fff w-342px",children:[a("div",{className:"text-36px border-b-2px pb-10px",children:null==i?void 0:i.time}),a("div",{className:"text-16px pt-14px max-h-500px overflow-auto font-normal",children:null==i?void 0:i.description})]}),a("div",{className:"mask fixed top--325px right--404px w-1291px h-1293px",style:{backgroundImage:"url(".concat("/ldx-three-learn/nebularOrbit/img/星球.png",")"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"-100px -100px",pointerEvents:"none"}})]})}))}}}))}();
