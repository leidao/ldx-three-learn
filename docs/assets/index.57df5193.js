var ve=Object.defineProperty;var te=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var U=(a,e,n)=>e in a?ve(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,ne=(a,e)=>{for(var n in e||(e={}))ye.call(e,n)&&U(a,n,e[n]);if(te)for(var n of te(e))ge.call(e,n)&&U(a,n,e[n]);return a};var g=(a,e,n)=>(U(a,typeof e!="symbol"?e+"":e,n),n);import{k as xe,l as be,m as we,d as B,n as Ce,o as Se,c as X,_,b as ce,j as M,r as v,C as Z,p as Pe,f as Re,a as G,S as Le,q as De,s as Ee}from"./index.7fcc6f1e.js";import{V as b,Q as oe,L as Oe,F as le,af as ke,G as K,T as Te,C as _e,ag as Fe,ah as E,ai as Me,b as $,H as V,M as Y,O as j,B as re,_ as ze,i as Ae,aj as Ne,ak as Be,E as je,al as Ie,Z as ae,am as Ge,an as H,e as qe,ao as Ue,$ as Ke,g as $e,ap as Ve,c as Ye}from"./index.a09f25bb.js";import{C as He,a as Qe}from"./CSS3DRenderer.14a1f87a.js";function Xe(a){return Object.keys(a).reduce(function(e,n){return(n.substr(0,5)==="data-"||n.substr(0,5)==="aria-"||n==="role")&&n.substr(0,7)!=="data-__"&&(e[n]=a[n]),e},{})}var ue=function(a){xe(n,a);var e=be(n);function n(t){var o;we(this,n),o=e.call(this,t),o.handleChange=function(i){var s=o.props,c=s.disabled,l=s.onChange;c||("checked"in o.props||o.setState({checked:i.target.checked}),l&&l({target:B(B({},o.props),{},{checked:i.target.checked}),stopPropagation:function(){i.stopPropagation()},preventDefault:function(){i.preventDefault()},nativeEvent:i.nativeEvent}))},o.saveInput=function(i){o.input=i};var r="checked"in t?t.checked:t.defaultChecked;return o.state={checked:r},o}return Ce(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var o,r=this.props,i=r.prefixCls,s=r.className,c=r.style,l=r.name,u=r.id,d=r.type,m=r.disabled,p=r.readOnly,y=r.tabIndex,h=r.onClick,f=r.onFocus,x=r.onBlur,w=r.onKeyDown,P=r.onKeyPress,O=r.onKeyUp,R=r.autoFocus,L=r.value,z=r.required,k=Se(r,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),F=Object.keys(k).reduce(function(D,C){return(C.substr(0,5)==="aria-"||C.substr(0,5)==="data-"||C==="role")&&(D[C]=k[C]),D},{}),T=this.state.checked,A=X(i,s,(o={},_(o,"".concat(i,"-checked"),T),_(o,"".concat(i,"-disabled"),m),o));return ce("span",{className:A,style:c,children:[M("input",ne({name:l,id:u,type:d,required:z,readOnly:p,disabled:m,tabIndex:y,className:"".concat(i,"-input"),checked:!!T,onClick:h,onFocus:f,onBlur:x,onKeyUp:O,onKeyDown:w,onKeyPress:P,onChange:this.handleChange,autoFocus:R,ref:this.saveInput,value:L},F)),M("span",{className:"".concat(i,"-inner")})]})}}],[{key:"getDerivedStateFromProps",value:function(o,r){return"checked"in o?B(B({},r),{},{checked:o.checked}):null}}]),n}(v.exports.Component);ue.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var de=v.exports.createContext(null),Ze=de.Provider,he=de,We=globalThis&&globalThis.__rest||function(a,e){var n={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(n[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(a);o<t.length;o++)e.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(a,t[o])&&(n[t[o]]=a[t[o]]);return n},Je=function(e,n){var t,o=v.exports.useContext(he),r=v.exports.useContext(Z),i=r.getPrefixCls,s=r.direction,c=v.exports.useRef(),l=Pe(n,c);v.exports.useEffect(function(){Re(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")},[]);var u=function(O){var R,L;(R=e.onChange)===null||R===void 0||R.call(e,O),(L=o==null?void 0:o.onChange)===null||L===void 0||L.call(o,O)},d=e.prefixCls,m=e.className,p=e.children,y=e.style,h=We(e,["prefixCls","className","children","style"]),f=i("radio",d),x=G({},h);o&&(x.name=o.name,x.onChange=u,x.checked=e.value===o.value,x.disabled=e.disabled||o.disabled);var w=X("".concat(f,"-wrapper"),(t={},_(t,"".concat(f,"-wrapper-checked"),x.checked),_(t,"".concat(f,"-wrapper-disabled"),x.disabled),_(t,"".concat(f,"-wrapper-rtl"),s==="rtl"),t),m);return v.exports.createElement("label",{className:w,style:y,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},v.exports.createElement(ue,G({},x,{type:"radio",prefixCls:f,ref:l})),p!==void 0?v.exports.createElement("span",null,p):null)},pe=v.exports.forwardRef(Je);pe.displayName="Radio";var q=pe,et=v.exports.forwardRef(function(a,e){var n=v.exports.useContext(Z),t=n.getPrefixCls,o=n.direction,r=v.exports.useContext(Le),i=De(a.defaultValue,{value:a.value}),s=Ee(i,2),c=s[0],l=s[1],u=function(p){var y=c,h=p.target.value;"value"in a||l(h);var f=a.onChange;f&&h!==y&&f(p)},d=function(){var p,y=a.prefixCls,h=a.className,f=h===void 0?"":h,x=a.options,w=a.optionType,P=a.buttonStyle,O=P===void 0?"outline":P,R=a.disabled,L=a.children,z=a.size,k=a.style,F=a.id,T=a.onMouseEnter,A=a.onMouseLeave,D=t("radio",y),C="".concat(D,"-group"),N=L;if(x&&x.length>0){var J=w==="button"?"".concat(D,"-button"):D;N=x.map(function(S){return typeof S=="string"||typeof S=="number"?v.exports.createElement(q,{key:S.toString(),prefixCls:J,disabled:R,value:S,checked:c===S},S):v.exports.createElement(q,{key:"radio-group-value-options-".concat(S.value),prefixCls:J,disabled:S.disabled||R,value:S.value,checked:c===S.value,style:S.style},S.label)})}var ee=z||r,me=X(C,"".concat(C,"-").concat(O),(p={},_(p,"".concat(C,"-").concat(ee),ee),_(p,"".concat(C,"-rtl"),o==="rtl"),p),f);return v.exports.createElement("div",G({},Xe(a),{className:me,style:k,onMouseEnter:T,onMouseLeave:A,id:F,ref:e}),N)};return v.exports.createElement(Ze,{value:{onChange:u,value:c,disabled:a.disabled,name:a.name}},d())}),tt=v.exports.memo(et),nt=globalThis&&globalThis.__rest||function(a,e){var n={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(n[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(a);o<t.length;o++)e.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(a,t[o])&&(n[t[o]]=a[t[o]]);return n},ot=function(e,n){var t=v.exports.useContext(he),o=v.exports.useContext(Z),r=o.getPrefixCls,i=e.prefixCls,s=nt(e,["prefixCls"]),c=r("radio-button",i);return t&&(s.checked=e.value===t.value,s.disabled=e.disabled||t.disabled),v.exports.createElement(q,G({prefixCls:c},s,{type:"radio",ref:n}))},rt=v.exports.forwardRef(ot),W=q;W.Button=rt;W.Group=tt;var Q=W;const I=(a,e)=>{const n=(90-e)*(Math.PI/180),t=(a+90)*(Math.PI/180);return{phi:n,theta:t}},se=(a,e,n)=>{const t=(180+e)*(Math.PI/180),o=(90-n)*(Math.PI/180);return{x:-a*Math.sin(o)*Math.cos(t),y:a*Math.cos(o),z:a*Math.sin(o)*Math.sin(t)}},at=(a,e,n)=>{const t=a.lengthSq(),o=e.lengthSq(),r=n.lengthSq(),i=a.x,s=a.y,c=e.x,l=e.y,u=n.x,d=n.y,m=i*l+c*d+u*s-s*c-l*u-d*i,p=(o*d+t*l+r*s-o*s-r*l-t*d)/m/2,y=(r*c+o*i+t*u-t*c-o*u-r*i)/m/2;return new b(p,y,0)},st=(a,e)=>{const n=new b(0,0,0),t=a.clone().sub(n),o=e.clone().sub(n),r=t.clone().cross(o).normalize(),i=new b(0,0,1),s=new oe().setFromUnitVectors(r,i),c=a.clone().applyQuaternion(s),l=e.clone().applyQuaternion(s),d=c.clone().add(l).multiplyScalar(.5).clone().sub(n).normalize(),m=new b(0,1,0),p=new oe().setFromUnitVectors(d,m),y=c.clone().applyQuaternion(p.clone()),h=l.clone().applyQuaternion(p.clone()),f=s.clone().invert().multiply(p.clone().invert());return{startSphere:y,endSphere:h,quaternion:f}};class it extends Oe{constructor(e){super(e)}load(e,n,t,o){const r=this,i=new le(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(r.withCredentials),i.load(e,function(s){let c;try{c=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(s.substring(65,s.length-2))}const l=r.parse(c);n&&n(l)},t,o)}parse(e){return new fe(e)}}class fe{constructor(e){this.type="Font",this.data=e}generateShapes(e,n=100){const t=[],o=ct(e,n,this.data);for(let r=0,i=o.length;r<i;r++)Array.prototype.push.apply(t,o[r].toShapes());return t}}function ct(a,e,n){const t=Array.from(a),o=e/n.resolution,r=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,i=[];let s=0,c=0;for(let l=0;l<t.length;l++){const u=t[l];if(u===`
`)s=0,c-=r;else{const d=lt(u,o,s,c,n);s+=d.offsetX,i.push(d.path)}}return i}function lt(a,e,n,t,o){const r=o.glyphs[a]||o.glyphs["?"];if(!r){console.error('THREE.Font: character "'+a+'" does not exists in font family '+o.familyName+".");return}const i=new ke;let s,c,l,u,d,m,p,y;if(r.o){const h=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let f=0,x=h.length;f<x;)switch(h[f++]){case"m":s=h[f++]*e+n,c=h[f++]*e+t,i.moveTo(s,c);break;case"l":s=h[f++]*e+n,c=h[f++]*e+t,i.lineTo(s,c);break;case"q":l=h[f++]*e+n,u=h[f++]*e+t,d=h[f++]*e+n,m=h[f++]*e+t,i.quadraticCurveTo(d,m,l,u);break;case"b":l=h[f++]*e+n,u=h[f++]*e+t,d=h[f++]*e+n,m=h[f++]*e+t,p=h[f++]*e+n,y=h[f++]*e+t,i.bezierCurveTo(d,m,p,y,l,u);break}}return{offsetX:r.ha*e,path:i}}fe.prototype.isFont=!0;class ut{constructor(e){g(this,"clock");g(this,"textLoader");g(this,"fileLoader");g(this,"fontLoad");g(this,"viewer");g(this,"uniforms",{});g(this,"labelRenderer");g(this,"controls");g(this,"R",100);g(this,"customUniforms",{baseTexture:{type:"t",value:{}},mixAmount:{type:"f",value:0}});g(this,"group3D",new K);g(this,"group2D",new K);g(this,"sphere");g(this,"onResize",()=>{const{width:e,height:n}=this.viewer.container.getBoundingClientRect(),t=e/n;this.viewer.renderer.setSize(e,n),this.labelRenderer.setSize(e,n),this.viewer.camera.aspect=t,this.viewer.camera.updateProjectionMatrix(),this.render()});g(this,"listen",()=>{window.addEventListener("resize",this.onResize)});g(this,"destroy",()=>{window.removeEventListener("resize",this.onResize)});g(this,"createEarth",e=>{this.textLoader.load("propagate/img/earth.png",n=>{this.customUniforms.baseTexture.value=n;const t=new Me(e,100,100),o=new $({uniforms:this.customUniforms,vertexShader:`uniform float mixAmount;
                        varying vec2 vUv;
                        void main()
                        {
                            vUv = uv;
                          vec3 goalPosition = 200.0 * vec3( uv.x,uv.y/2.0, 0 ) + vec3(-100.0,-50.0, 0.0);
                          vec3 newPosition = mix( position, goalPosition, mixAmount );
                          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
                        }
                      `,fragmentShader:`uniform sampler2D baseTexture;
                          varying vec2 vUv;

                          void main()
                          {
                              gl_FragColor = texture2D( baseTexture, vUv );
                          }
                        `,side:V,transparent:!0,opacity:1});this.sphere=new Y(t,o),this.viewer.scene.add(this.sphere),this.render()})});g(this,"drawOutline",()=>{const e=this.R,n=new K,t=new $({uniforms:this.customUniforms,vertexShader:`uniform float mixAmount;
                     attribute vec3 current;
                        void main()
                        {
                          vec3 newPosition = mix( position, current, mixAmount );
                          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
                        }
                      `,fragmentShader:`void main()
                        {
                            gl_FragColor = vec4(1.0,1.0,1.0,0.2);
                        }
                      `,side:V,transparent:!0});this.fileLoader.load("propagate/data/world.json",o=>{o.features.forEach(r=>{if(r.geometry.type==="Polygon"){const i=[],s=[],c=r.geometry.coordinates[0]||[];if(c.length===0)return;c.forEach(l=>{i.push(l[0],l[1],0);const u=se(e*1.001,l[0],l[1]);s.push(u.x,u.y,u.z)}),n.add(this.drawLineLoop(i,s,t))}else r.geometry.type==="MultiPolygon"&&r.geometry.coordinates.forEach(i=>{const s=[],c=[],l=i[0]||[];l.length!==0&&(l.forEach(u=>{s.push(u[0],u[1],0);const d=se(e*1.001,u[0],u[1]);c.push(d.x,d.y,d.z)}),n.add(this.drawLineLoop(s,c,t)))})}),this.viewer.scene.add(n),this.render()},o=>{this.viewer.onProgress("propagate/data/world.json",o)})});g(this,"drawLineLoop",(e,n,t)=>{const o=new j,r=new Float32Array(n);return o.setAttribute("position",new re(r,3)),o.setAttribute("current",new re(new Float32Array(e),3)),new ze(o,t)});g(this,"drawShpae",(e,n)=>{const t=[];e.forEach(s=>{t.push(new Ae(s[0],s[1]))});const o=new Ne(t),r=new Be(o);return new Y(r,n)});g(this,"drawLines",(e,n)=>{const t=new je({color:14737632});n.forEach(o=>{const{to:r,name:i,isLine:s}=o;if(!r||!s||i==="\u66F2\u961C")return;const{fly:c,point:l}=this.draw2DLine(o,t);this.group2D.add(c,l);const{fly:u,point:d}=this.draw3DLine(o,t);this.group3D.add(u,d),this.render()})});g(this,"drawFlyLine",(e,n,t)=>{const o=[],r=[],i=[],s=[];e.forEach((d,m)=>{const p=m/(n-1);o.push({x:d.x,y:d.y,z:d.z}),i.push(p),s.push(m)}),o.forEach(d=>{r.push(d.x,d.y,d.z)});const c=new j;c.setFromPoints(e),c.setAttribute("position",new H(r,3)),c.setAttribute("index",new H(i,1)),c.setAttribute("current",new H(s,1)),this.uniforms[t]={uColor:{value:new qe(710128)},uRange:{value:20},uSize:{value:6},uTotal:{value:n},uTime:{value:0},uSpeed:{value:(Math.random()*4+4)/10}};const l=new $({transparent:!0,depthWrite:!1,depthTest:!1,blending:Ue,uniforms:this.uniforms[t],vertexShader:`
        attribute float index;
        attribute float current;
        uniform float uTime;
        uniform float uSize;
        uniform float uSpeed;
        uniform float uRange; // \u5C55\u793A\u533A\u95F4
        uniform float uTotal; // \u7C92\u5B50\u603B\u6570
        uniform vec3 uColor;
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
            // \u9700\u8981\u5F53\u524D\u663E\u793A\u7684\u7D22\u5F15
            float size = uSize;
            float showNumber = uTotal * mod(uTime * uSpeed, 1.1);
            if (showNumber > current && showNumber < current + uRange) {
                float uIndex = ((current + uRange) - showNumber) / uRange;
                size *= uIndex;
                vOpacity = 1.0;
            } else {
                vOpacity = 0.0;
            }
            // \u9876\u70B9\u7740\u8272\u5668\u8BA1\u7B97\u540E\u7684Position
            vColor = uColor;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_Position = projectionMatrix * mvPosition;
            // \u5927\u5C0F
            gl_PointSize = size * 300.0 / (-mvPosition.z);
        }`,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
            float distanceToCenter = distance(gl_PointCoord,vec2(0.5));
            float strength = 1.0 - (distanceToCenter * 2.0);
            if(vOpacity <= 0.0){
              gl_FragColor = vec4(vColor, 0.0);
            }else{
              gl_FragColor = vec4(vColor, strength);
            }
        }`});return new Ke(c,l)});g(this,"drawLocation",(e,n=!1)=>{const t=new $e({transparent:!0,side:V});this.textLoader.load("propagate/img/136.png",o=>{e.forEach(r=>{const{to:i,size:s}=r,c=Number(s)+2,l=n?s:c>16?16:c;if(!i)return;const{x:u,y:d,z:m}=new b(i[0],i[1],0),p=new Ve(l,l);t.map=o;const y=new Y(p,t);y.position.set(u,d,m+.02),this.group2D.add(y);const h=y.clone(),{phi:f,theta:x}=I(i[0],i[1]);h.position.setFromSphericalCoords(100,f,x);const w=new b;w.copy(h.position).multiplyScalar(2),h.lookAt(w),this.group3D.add(h)}),this.render()})});g(this,"update",()=>{const e=this.clock.getElapsedTime();Object.keys(this.uniforms).forEach(n=>{this.uniforms[n].uTime.value=e}),this.render()});e.useLoadingManager(),e.scene.add(this.group3D),this.viewer=e,this.textLoader=new Te,this.textLoader.setCrossOrigin(""),this.fileLoader=new le(e.loadmanager),this.fileLoader.setResponseType("json"),this.fontLoad=new it(e.loadmanager),this.clock=new _e,this.uniforms={},this.listen()}useCss3Render(){const{width:e,height:n}=this.viewer.container.getBoundingClientRect();this.labelRenderer=new He,this.labelRenderer.setSize(e,n),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0px";const t=this.labelRenderer.domElement;t.id="tempId",this.viewer.container.appendChild(t),this.controls=new Fe(this.viewer.camera,t),this.controls.addEventListener("change",()=>{this.render()}),this.controls.enablePan=!1,this.controls.minDistance=50,this.controls.maxDistance=250,this.controls.mouseButtons={LEFT:E.ROTATE,MIDDLE:E.DOLLY,RIGHT:E.PAN}}startGame(){this.viewer.scene.translateX(-10),this.viewer.scene.translateY(-15),this.loadSky(),this.drawLocation([{to:[117.045982,35.794391],size:35}],!0),this.fileLoader.load("propagate/data/map.json",e=>{this.useCss3Render();const n=this.R;this.createEarth(n),this.drawOutline(),this.drawLines(n,e),this.createText(e),this.drawLocation(e)},e=>{this.viewer.onProgress("propagate/data/map.json",e)})}render(){var e;this.viewer.render(),(e=this.labelRenderer)==null||e.render(this.viewer.scene,this.viewer.camera)}loadSky(){this.textLoader.load("propagate/img/bg.png",e=>{this.viewer.scene.background=e,this.render()})}draw2DLine(e,n){const{from:t,to:o,name:r}=e,i=new b(t[0],t[1],0),s=new b(o[0],o[1],0),c=i.clone().lerp(s,.5),l=i.clone().distanceTo(s);c.z+=l/3;const u=new Ie(i,c,s),d=u.getLength()*4,m=u.getPoints(d),p=new j().setFromPoints(m),y=new ae(p,n),h=this.drawFlyLine(m,d,`${r}2d`);return{fly:y,point:h}}draw3DLine(e,n){const t=this.R,{from:o,to:r,name:i}=e,{phi:s,theta:c}=I(o[0],o[1]),l=new b().setFromSphericalCoords(100,s,c),{phi:u,theta:d}=I(r[0],r[1]),m=new b().setFromSphericalCoords(100,u,d),p=st(l,m),y=p.startSphere,h=p.endSphere,f=y.clone().lerp(h,.5).normalize(),x=ie(y,h,new b(0,0,0)),w=f.multiplyScalar(t+t*x*.1),P=at(y,h,w),O=Math.abs(P.y-w.y),R=ie(y,new b(0,-1,0),P),L=-Math.PI/2+R,z=Math.PI-L,k=new Ge(P.x,P.y,O,L,z,!1),F=k.getLength()*4,T=k.getPoints(F),A=new j().setFromPoints(T),D=new ae(A,n);D.quaternion.multiply(p.quaternion);const C=this.drawFlyLine(T.map(N=>new b(N.x,N.y,0).applyQuaternion(p.quaternion)),F,`${i}3d`);return{fly:D,point:C}}createText(e){e.forEach(n=>{const{to:t,name:o,size:r,isLine:i}=n;if(!o||!i||!t)return;const s=document.createElement("div");s.style.fontSize=o==="\u66F2\u961C"?"20px":"12px",s.style.color="#ffffff",s.style.position="absolute",s.style.fontFamily="HanaA",s.style.whiteSpace="nowrap";let c=`<span>${o}</span> `;r>1&&(c+=`<span style="font-size:28px;vertical-align: sub;">${r}</span> <span>\u6240</span>`),s.innerHTML=c;const l=new Qe(s);l.name="2d",l.position.set(t[0],t[1]-1,0),l.scale.set(.15,.15,.15),o=="\u66F2\u961C"&&(l.scale.set(.2,.2,.2),l.position.set(t[0],t[1]-4,0)),this.group2D.add(l);const u=l.clone();u.name="3d";const{phi:d,theta:m}=I(t[0],t[1]);u.position.setFromSphericalCoords(100,d,m);const p=new b;p.copy(u.position).multiplyScalar(2),u.lookAt(p),u.scale.set(.15,.15,.15),o=="\u66F2\u961C"&&u.scale.set(.2,.2,.2),this.group3D.add(u),this.render()})}}const ie=(a,e,n)=>{const t=a.clone().sub(n).normalize(),o=e.clone().sub(n).normalize(),r=t.clone().dot(o);return Math.acos(r)},mt=()=>{const a=v.exports.useRef(null),[e,n]=v.exports.useState("3D"),[t,o]=v.exports.useState(),[r,i]=v.exports.useState();return v.exports.useEffect(()=>{if(!a.current)return;const s=new Ye(a.current);i(s),s.useOrbitControls();const c=new ut(s);o(c),c.startGame();let l;const u=()=>{c.update(),l=requestAnimationFrame(u)};return u(),()=>{cancelIdleCallback(l)}},[]),M("div",{className:"w-100% h-100% relative",children:M("div",{className:"gunplay w-100% h-100% ",ref:a,children:ce(Q.Group,{className:"absolute top-20px right-20px z-999",buttonStyle:"solid",value:e,onChange:s=>{const c=s.target.value;if(!t)return;let l=c==="2D"?0:1;c==="2D"?(r==null||r.scene.remove(t.group3D),t.group3D.traverse(d=>{d.name==="3d"&&(d.element.style.display="none")}),t.controls.enablePan=!0,t.controls.enableRotate=!1,t.controls.mouseButtons={LEFT:E.PAN,MIDDLE:E.DOLLY,RIGHT:E.ROTATE}):(r==null||r.scene.remove(t.group2D),t.group2D.traverse(d=>{d.name==="2d"&&(d.element.style.display="none")}),t.controls.enablePan=!1,t.controls.enableRotate=!0,t.controls.mouseButtons={LEFT:E.ROTATE,MIDDLE:E.DOLLY,RIGHT:E.PAN}),t.controls.reset();const u=()=>{c==="2D"?l+=.01:l-=.01,l<1.01&&l>-.01?(t.sphere.scale.set(1+l*.8,1+l*.8,1+l*.8),t.customUniforms.mixAmount.value=l,requestAnimationFrame(u)):c==="2D"?(r==null||r.scene.add(t.group2D),t.group2D.traverse(d=>{d.name==="2d"&&(console.log("yyy"),d.element.style.display="block")})):(r==null||r.scene.add(t.group3D),t.group3D.traverse(d=>{d.name==="3d"&&(d.element.style.display="block")}))};u(),n(c)},children:[M(Q.Button,{value:"2D",children:"2D"}),M(Q.Button,{value:"3D",children:"3D"})]})})})};export{mt as default};
