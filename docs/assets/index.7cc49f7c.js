var fe=Object.defineProperty;var me=(a,t,n)=>t in a?fe(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var y=(a,t,n)=>(me(a,typeof t!="symbol"?t+"":t,n),n);import{r as p,L as ve,v as se,P as ge,H as K,I as ye,d as ee,C as X,U as xe,a as B,W as we,c as ie,_ as A,V as be,m as Ce,j as N,b as Se}from"./index.fafe12e9.js";import{V as C,Q as te,L as Pe,F as ce,af as Re,G as V,T as Le,C as Ee,ag as _e,ah as O,ai as De,b as q,H as U,M as H,O as j,B as ne,_ as Oe,i as Te,aj as Me,ak as Ae,E as ze,al as Fe,Z as oe,am as ke,an as Y,e as Ne,ao as je,$ as Ie,g as Be,ap as $e,c as Ge}from"./index.468c1669.js";import{C as Ve,a as qe}from"./CSS3DRenderer.8c82c3f3.js";import{F as Ue}from"./context.7dbf866d.js";function He(a){return Object.keys(a).reduce(function(t,n){return(n.startsWith("data-")||n.startsWith("aria-")||n==="role")&&!n.startsWith("data-__")&&(t[n]=a[n]),t},{})}var le=p.exports.createContext(null),Ye=le.Provider,ue=p.exports.createContext(null),Qe=ue.Provider,de={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(a){(function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(!!o){var l=typeof o;if(l==="string"||l==="number")e.push(o);else if(Array.isArray(o)){if(o.length){var s=n.apply(null,o);s&&e.push(s)}}else if(l==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var i in o)t.call(o,i)&&o[i]&&e.push(i)}}}return e.join(" ")}a.exports?(n.default=n,a.exports=n):window.classNames=n})()})(de);var Xe=de.exports,We=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],Ze=p.exports.forwardRef(function(a,t){var n,e=a.prefixCls,r=e===void 0?"rc-checkbox":e,o=a.className,l=a.style,s=a.checked,i=a.disabled,c=a.defaultChecked,d=c===void 0?!1:c,u=a.type,m=u===void 0?"checkbox":u,f=a.onChange,g=ve(a,We),h=p.exports.useRef(null),v=se(d,{value:s}),b=ge(v,2),S=b[0],L=b[1];p.exports.useImperativeHandle(t,function(){return{focus:function(){var x;(x=h.current)===null||x===void 0||x.focus()},blur:function(){var x;(x=h.current)===null||x===void 0||x.blur()},input:h.current}});var T=Xe(r,o,(n={},K(n,"".concat(r,"-checked"),S),K(n,"".concat(r,"-disabled"),i),n)),R=function(x){i||("checked"in a||L(x.target.checked),f==null||f({target:ee(ee({},a),{},{type:m,checked:x.target.checked}),stopPropagation:function(){x.stopPropagation()},preventDefault:function(){x.preventDefault()},nativeEvent:x.nativeEvent}))};return p.exports.createElement("span",{className:T,style:l},p.exports.createElement("input",ye({},g,{className:"".concat(r,"-input"),ref:h,onChange:R,disabled:i,checked:!!S,type:m})),p.exports.createElement("span",{className:"".concat(r,"-inner")}))}),Je=globalThis&&globalThis.__rest||function(a,t){var n={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&t.indexOf(e)<0&&(n[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(n[e[r]]=a[e[r]]);return n},Ke=function(t,n){var e,r,o=p.exports.useContext(le),l=p.exports.useContext(ue),s=p.exports.useContext(X),i=s.getPrefixCls,c=s.direction,d=p.exports.useRef(),u=xe(n,d),m=p.exports.useContext(Ue),f=m.isFormItemInput,g=function(_){var E,D;(E=t.onChange)===null||E===void 0||E.call(t,_),(D=o==null?void 0:o.onChange)===null||D===void 0||D.call(o,_)},h=t.prefixCls,v=t.className,b=t.children,S=t.style,L=Je(t,["prefixCls","className","children","style"]),T=i("radio",h),R=((o==null?void 0:o.optionType)||l)==="button"?"".concat(T,"-button"):T,w=B({},L),x=p.exports.useContext(we);o&&(w.name=o.name,w.onChange=g,w.checked=t.value===o.value,w.disabled=(e=w.disabled)!==null&&e!==void 0?e:o.disabled),w.disabled=(r=w.disabled)!==null&&r!==void 0?r:x;var M=ie("".concat(R,"-wrapper"),A(A(A(A({},"".concat(R,"-wrapper-checked"),w.checked),"".concat(R,"-wrapper-disabled"),w.disabled),"".concat(R,"-wrapper-rtl"),c==="rtl"),"".concat(R,"-wrapper-in-form-item"),f),v);return p.exports.createElement("label",{className:M,style:S,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},p.exports.createElement(Ze,B({},w,{type:"radio",prefixCls:R,ref:u})),b!==void 0?p.exports.createElement("span",null,b):null)},et=p.exports.forwardRef(Ke),$=et,tt=p.exports.forwardRef(function(a,t){var n=p.exports.useContext(X),e=n.getPrefixCls,r=n.direction,o=p.exports.useContext(be),l=se(a.defaultValue,{value:a.value}),s=Ce(l,2),i=s[0],c=s[1],d=function(W){var pe=i,Z=W.target.value;"value"in a||c(Z);var J=a.onChange;J&&Z!==pe&&J(W)},u=a.prefixCls,m=a.className,f=m===void 0?"":m,g=a.options,h=a.buttonStyle,v=h===void 0?"outline":h,b=a.disabled,S=a.children,L=a.size,T=a.style,R=a.id,w=a.onMouseEnter,x=a.onMouseLeave,M=a.onFocus,z=a.onBlur,_=e("radio",u),E="".concat(_,"-group"),D=S;g&&g.length>0&&(D=g.map(function(P){return typeof P=="string"||typeof P=="number"?p.exports.createElement($,{key:P.toString(),prefixCls:_,disabled:b,value:P,checked:i===P},P):p.exports.createElement($,{key:"radio-group-value-options-".concat(P.value),prefixCls:_,disabled:P.disabled||b,value:P.value,checked:i===P.value,style:P.style},P.label)}));var F=L||o,k=ie(E,"".concat(E,"-").concat(v),A(A({},"".concat(E,"-").concat(F),F),"".concat(E,"-rtl"),r==="rtl"),f);return p.exports.createElement("div",B({},He(a),{className:k,style:T,onMouseEnter:w,onMouseLeave:x,onFocus:M,onBlur:z,id:R,ref:t}),p.exports.createElement(Ye,{value:{onChange:d,value:i,disabled:a.disabled,name:a.name,optionType:a.optionType}},D))}),nt=p.exports.memo(tt),ot=globalThis&&globalThis.__rest||function(a,t){var n={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&t.indexOf(e)<0&&(n[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(n[e[r]]=a[e[r]]);return n},rt=function(t,n){var e=p.exports.useContext(X),r=e.getPrefixCls,o=t.prefixCls,l=ot(t,["prefixCls"]),s=r("radio",o);return p.exports.createElement(Qe,{value:"button"},p.exports.createElement($,B({prefixCls:s},l,{type:"radio",ref:n})))},at=p.exports.forwardRef(rt),G=$;G.Button=at;G.Group=nt;G.__ANT_RADIO=!0;var Q=G;const I=(a,t)=>{const n=(90-t)*(Math.PI/180),e=(a+90)*(Math.PI/180);return{phi:n,theta:e}},re=(a,t,n)=>{const e=(180+t)*(Math.PI/180),r=(90-n)*(Math.PI/180);return{x:-a*Math.sin(r)*Math.cos(e),y:a*Math.cos(r),z:a*Math.sin(r)*Math.sin(e)}},st=(a,t,n)=>{const e=a.lengthSq(),r=t.lengthSq(),o=n.lengthSq(),l=a.x,s=a.y,i=t.x,c=t.y,d=n.x,u=n.y,m=l*c+i*u+d*s-s*i-c*d-u*l,f=(r*u+e*c+o*s-r*s-o*c-e*u)/m/2,g=(o*i+r*l+e*d-e*i-r*d-o*l)/m/2;return new C(f,g,0)},it=(a,t)=>{const n=new C(0,0,0),e=a.clone().sub(n),r=t.clone().sub(n),o=e.clone().cross(r).normalize(),l=new C(0,0,1),s=new te().setFromUnitVectors(o,l),i=a.clone().applyQuaternion(s),c=t.clone().applyQuaternion(s),u=i.clone().add(c).multiplyScalar(.5).clone().sub(n).normalize(),m=new C(0,1,0),f=new te().setFromUnitVectors(u,m),g=i.clone().applyQuaternion(f.clone()),h=c.clone().applyQuaternion(f.clone()),v=s.clone().invert().multiply(f.clone().invert());return{startSphere:g,endSphere:h,quaternion:v}};class ct extends Pe{constructor(t){super(t)}load(t,n,e,r){const o=this,l=new ce(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,function(s){let i;try{i=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(s.substring(65,s.length-2))}const c=o.parse(i);n&&n(c)},e,r)}parse(t){return new he(t)}}class he{constructor(t){this.type="Font",this.data=t}generateShapes(t,n=100){const e=[],r=lt(t,n,this.data);for(let o=0,l=r.length;o<l;o++)Array.prototype.push.apply(e,r[o].toShapes());return e}}function lt(a,t,n){const e=Array.from(a),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,l=[];let s=0,i=0;for(let c=0;c<e.length;c++){const d=e[c];if(d===`
`)s=0,i-=o;else{const u=ut(d,r,s,i,n);s+=u.offsetX,l.push(u.path)}}return l}function ut(a,t,n,e,r){const o=r.glyphs[a]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+a+'" does not exists in font family '+r.familyName+".");return}const l=new Re;let s,i,c,d,u,m,f,g;if(o.o){const h=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let v=0,b=h.length;v<b;)switch(h[v++]){case"m":s=h[v++]*t+n,i=h[v++]*t+e,l.moveTo(s,i);break;case"l":s=h[v++]*t+n,i=h[v++]*t+e,l.lineTo(s,i);break;case"q":c=h[v++]*t+n,d=h[v++]*t+e,u=h[v++]*t+n,m=h[v++]*t+e,l.quadraticCurveTo(u,m,c,d);break;case"b":c=h[v++]*t+n,d=h[v++]*t+e,u=h[v++]*t+n,m=h[v++]*t+e,f=h[v++]*t+n,g=h[v++]*t+e,l.bezierCurveTo(u,m,f,g,c,d);break}}return{offsetX:o.ha*t,path:l}}he.prototype.isFont=!0;class dt{constructor(t){y(this,"clock");y(this,"textLoader");y(this,"fileLoader");y(this,"fontLoad");y(this,"viewer");y(this,"uniforms",{});y(this,"labelRenderer");y(this,"controls");y(this,"R",100);y(this,"customUniforms",{baseTexture:{type:"t",value:{}},mixAmount:{type:"f",value:0}});y(this,"group3D",new V);y(this,"group2D",new V);y(this,"sphere");y(this,"onResize",()=>{const{width:t,height:n}=this.viewer.container.getBoundingClientRect(),e=t/n;this.viewer.renderer.setSize(t,n),this.labelRenderer.setSize(t,n),this.viewer.camera.aspect=e,this.viewer.camera.updateProjectionMatrix(),this.render()});y(this,"listen",()=>{window.addEventListener("resize",this.onResize)});y(this,"destroy",()=>{window.removeEventListener("resize",this.onResize)});y(this,"createEarth",t=>{this.textLoader.load("propagate/img/earth.png",n=>{this.customUniforms.baseTexture.value=n;const e=new De(t,100,100),r=new q({uniforms:this.customUniforms,vertexShader:`uniform float mixAmount;
                        varying vec2 vUv;
                        void main()
                        {
                            vUv = uv;
                          vec3 goalPosition = 200.0 * vec3( uv.x,uv.y/2.0, 0 ) + vec3(-100.0,-50.0, 0.0);
                          vec3 newPosition = mix( position, goalPosition, mixAmount );
                          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
                        }
                      `,fragmentShader:`uniform sampler2D baseTexture;
                          varying vec2 vUv;

                          void main()
                          {
                              gl_FragColor = texture2D( baseTexture, vUv );
                          }
                        `,side:U,transparent:!0,opacity:1});this.sphere=new H(e,r),this.viewer.scene.add(this.sphere),this.render()})});y(this,"drawOutline",()=>{const t=this.R,n=new V,e=new q({uniforms:this.customUniforms,vertexShader:`uniform float mixAmount;
                     attribute vec3 current;
                        void main()
                        {
                          vec3 newPosition = mix( position, current, mixAmount );
                          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
                        }
                      `,fragmentShader:`void main()
                        {
                            gl_FragColor = vec4(1.0,1.0,1.0,0.2);
                        }
                      `,side:U,transparent:!0});this.fileLoader.load("propagate/data/world.json",r=>{r.features.forEach(o=>{if(o.geometry.type==="Polygon"){const l=[],s=[],i=o.geometry.coordinates[0]||[];if(i.length===0)return;i.forEach(c=>{l.push(c[0],c[1],0);const d=re(t*1.001,c[0],c[1]);s.push(d.x,d.y,d.z)}),n.add(this.drawLineLoop(l,s,e))}else o.geometry.type==="MultiPolygon"&&o.geometry.coordinates.forEach(l=>{const s=[],i=[],c=l[0]||[];c.length!==0&&(c.forEach(d=>{s.push(d[0],d[1],0);const u=re(t*1.001,d[0],d[1]);i.push(u.x,u.y,u.z)}),n.add(this.drawLineLoop(s,i,e)))})}),this.viewer.scene.add(n),this.render()},r=>{this.viewer.onProgress("propagate/data/world.json",r)})});y(this,"drawLineLoop",(t,n,e)=>{const r=new j,o=new Float32Array(n);return r.setAttribute("position",new ne(o,3)),r.setAttribute("current",new ne(new Float32Array(t),3)),new Oe(r,e)});y(this,"drawShpae",(t,n)=>{const e=[];t.forEach(s=>{e.push(new Te(s[0],s[1]))});const r=new Me(e),o=new Ae(r);return new H(o,n)});y(this,"drawLines",(t,n)=>{const e=new ze({color:14737632});n.forEach(r=>{const{to:o,name:l,isLine:s}=r;if(!o||!s||l==="\u66F2\u961C")return;const{fly:i,point:c}=this.draw2DLine(r,e);this.group2D.add(i,c);const{fly:d,point:u}=this.draw3DLine(r,e);this.group3D.add(d,u),this.render()})});y(this,"drawFlyLine",(t,n,e)=>{const r=[],o=[],l=[],s=[];t.forEach((u,m)=>{const f=m/(n-1);r.push({x:u.x,y:u.y,z:u.z}),l.push(f),s.push(m)}),r.forEach(u=>{o.push(u.x,u.y,u.z)});const i=new j;i.setFromPoints(t),i.setAttribute("position",new Y(o,3)),i.setAttribute("index",new Y(l,1)),i.setAttribute("current",new Y(s,1)),this.uniforms[e]={uColor:{value:new Ne(710128)},uRange:{value:20},uSize:{value:6},uTotal:{value:n},uTime:{value:0},uSpeed:{value:(Math.random()*4+4)/10}};const c=new q({transparent:!0,depthWrite:!1,depthTest:!1,blending:je,uniforms:this.uniforms[e],vertexShader:`
        attribute float index;
        attribute float current;
        uniform float uTime;
        uniform float uSize;
        uniform float uSpeed;
        uniform float uRange; // \u5C55\u793A\u533A\u95F4
        uniform float uTotal; // \u7C92\u5B50\u603B\u6570
        uniform vec3 uColor;
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
            // \u9700\u8981\u5F53\u524D\u663E\u793A\u7684\u7D22\u5F15
            float size = uSize;
            float showNumber = uTotal * mod(uTime * uSpeed, 1.1);
            if (showNumber > current && showNumber < current + uRange) {
                float uIndex = ((current + uRange) - showNumber) / uRange;
                size *= uIndex;
                vOpacity = 1.0;
            } else {
                vOpacity = 0.0;
            }
            // \u9876\u70B9\u7740\u8272\u5668\u8BA1\u7B97\u540E\u7684Position
            vColor = uColor;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_Position = projectionMatrix * mvPosition;
            // \u5927\u5C0F
            gl_PointSize = size * 300.0 / (-mvPosition.z);
        }`,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
            float distanceToCenter = distance(gl_PointCoord,vec2(0.5));
            float strength = 1.0 - (distanceToCenter * 2.0);
            if(vOpacity <= 0.0){
              gl_FragColor = vec4(vColor, 0.0);
            }else{
              gl_FragColor = vec4(vColor, strength);
            }
        }`});return new Ie(i,c)});y(this,"drawLocation",(t,n=!1)=>{const e=new Be({transparent:!0,side:U});this.textLoader.load("propagate/img/136.png",r=>{t.forEach(o=>{const{to:l,size:s}=o,i=Number(s)+2,c=n?s:i>16?16:i;if(!l)return;const{x:d,y:u,z:m}=new C(l[0],l[1],0),f=new $e(c,c);e.map=r;const g=new H(f,e);g.position.set(d,u,m+.02),this.group2D.add(g);const h=g.clone(),{phi:v,theta:b}=I(l[0],l[1]);h.position.setFromSphericalCoords(100,v,b);const S=new C;S.copy(h.position).multiplyScalar(2),h.lookAt(S),this.group3D.add(h)}),this.render()})});y(this,"update",()=>{const t=this.clock.getElapsedTime();Object.keys(this.uniforms).forEach(n=>{this.uniforms[n].uTime.value=t}),this.render()});t.useLoadingManager(),t.scene.add(this.group3D),this.viewer=t,this.textLoader=new Le,this.textLoader.setCrossOrigin(""),this.fileLoader=new ce(t.loadmanager),this.fileLoader.setResponseType("json"),this.fontLoad=new ct(t.loadmanager),this.clock=new Ee,this.uniforms={},this.listen()}useCss3Render(){const{width:t,height:n}=this.viewer.container.getBoundingClientRect();this.labelRenderer=new Ve,this.labelRenderer.setSize(t,n),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0px";const e=this.labelRenderer.domElement;e.id="tempId",this.viewer.container.appendChild(e),this.controls=new _e(this.viewer.camera,e),this.controls.addEventListener("change",()=>{this.render()}),this.controls.enablePan=!1,this.controls.minDistance=50,this.controls.maxDistance=250,this.controls.mouseButtons={LEFT:O.ROTATE,MIDDLE:O.DOLLY,RIGHT:O.PAN}}startGame(){this.viewer.scene.translateX(-10),this.viewer.scene.translateY(-15),this.loadSky(),this.drawLocation([{to:[117.045982,35.794391],size:35}],!0),this.fileLoader.load("propagate/data/map.json",t=>{this.useCss3Render();const n=this.R;this.createEarth(n),this.drawOutline(),this.drawLines(n,t),this.createText(t),this.drawLocation(t)},t=>{this.viewer.onProgress("propagate/data/map.json",t)})}render(){var t;this.viewer.render(),(t=this.labelRenderer)==null||t.render(this.viewer.scene,this.viewer.camera)}loadSky(){this.textLoader.load("propagate/img/bg.png",t=>{this.viewer.scene.background=t,this.render()})}draw2DLine(t,n){const{from:e,to:r,name:o}=t,l=new C(e[0],e[1],0),s=new C(r[0],r[1],0),i=l.clone().lerp(s,.5),c=l.clone().distanceTo(s);i.z+=c/3;const d=new Fe(l,i,s),u=d.getLength()*4,m=d.getPoints(u),f=new j().setFromPoints(m),g=new oe(f,n),h=this.drawFlyLine(m,u,`${o}2d`);return{fly:g,point:h}}draw3DLine(t,n){const e=this.R,{from:r,to:o,name:l}=t,{phi:s,theta:i}=I(r[0],r[1]),c=new C().setFromSphericalCoords(100,s,i),{phi:d,theta:u}=I(o[0],o[1]),m=new C().setFromSphericalCoords(100,d,u),f=it(c,m),g=f.startSphere,h=f.endSphere,v=g.clone().lerp(h,.5).normalize(),b=ae(g,h,new C(0,0,0)),S=v.multiplyScalar(e+e*b*.1),L=st(g,h,S),T=Math.abs(L.y-S.y),R=ae(g,new C(0,-1,0),L),w=-Math.PI/2+R,x=Math.PI-w,M=new ke(L.x,L.y,T,w,x,!1),z=M.getLength()*4,_=M.getPoints(z),E=new j().setFromPoints(_),D=new oe(E,n);D.quaternion.multiply(f.quaternion);const F=this.drawFlyLine(_.map(k=>new C(k.x,k.y,0).applyQuaternion(f.quaternion)),z,`${l}3d`);return{fly:D,point:F}}createText(t){t.forEach(n=>{const{to:e,name:r,size:o,isLine:l}=n;if(!r||!l||!e)return;const s=document.createElement("div");s.style.fontSize=r==="\u66F2\u961C"?"20px":"12px",s.style.color="#ffffff",s.style.position="absolute",s.style.fontFamily="HanaA",s.style.whiteSpace="nowrap";let i=`<span>${r}</span> `;o>1&&(i+=`<span style="font-size:28px;vertical-align: sub;">${o}</span> <span>\u6240</span>`),s.innerHTML=i;const c=new qe(s);c.name="2d",c.position.set(e[0],e[1]-1,0),c.scale.set(.15,.15,.15),r=="\u66F2\u961C"&&(c.scale.set(.2,.2,.2),c.position.set(e[0],e[1]-4,0)),this.group2D.add(c);const d=c.clone();d.name="3d";const{phi:u,theta:m}=I(e[0],e[1]);d.position.setFromSphericalCoords(100,u,m);const f=new C;f.copy(d.position).multiplyScalar(2),d.lookAt(f),d.scale.set(.15,.15,.15),r=="\u66F2\u961C"&&d.scale.set(.2,.2,.2),this.group3D.add(d),this.render()})}}const ae=(a,t,n)=>{const e=a.clone().sub(n).normalize(),r=t.clone().sub(n).normalize(),o=e.clone().dot(r);return Math.acos(o)},gt=()=>{const a=p.exports.useRef(null),[t,n]=p.exports.useState("3D"),[e,r]=p.exports.useState(),[o,l]=p.exports.useState();return p.exports.useEffect(()=>{if(!a.current)return;const s=new Ge(a.current);l(s),s.useOrbitControls();const i=new dt(s);r(i),i.startGame();let c;const d=()=>{i.update(),c=requestAnimationFrame(d)};return d(),()=>{cancelIdleCallback(c)}},[]),N("div",{className:"w-100% h-100% relative",children:N("div",{className:"gunplay w-100% h-100% ",ref:a,children:Se(Q.Group,{className:"absolute top-20px right-20px z-999",buttonStyle:"solid",value:t,onChange:s=>{const i=s.target.value;if(!e)return;let c=i==="2D"?0:1;i==="2D"?(o==null||o.scene.remove(e.group3D),e.group3D.traverse(u=>{u.name==="3d"&&(u.element.style.display="none")}),e.controls.enablePan=!0,e.controls.enableRotate=!1,e.controls.mouseButtons={LEFT:O.PAN,MIDDLE:O.DOLLY,RIGHT:O.ROTATE}):(o==null||o.scene.remove(e.group2D),e.group2D.traverse(u=>{u.name==="2d"&&(u.element.style.display="none")}),e.controls.enablePan=!1,e.controls.enableRotate=!0,e.controls.mouseButtons={LEFT:O.ROTATE,MIDDLE:O.DOLLY,RIGHT:O.PAN}),e.controls.reset();const d=()=>{i==="2D"?c+=.01:c-=.01,c<1.01&&c>-.01?(e.sphere.scale.set(1+c*.8,1+c*.8,1+c*.8),e.customUniforms.mixAmount.value=c,requestAnimationFrame(d)):i==="2D"?(o==null||o.scene.add(e.group2D),e.group2D.traverse(u=>{u.name==="2d"&&(console.log("yyy"),u.element.style.display="block")})):(o==null||o.scene.add(e.group3D),e.group3D.traverse(u=>{u.name==="3d"&&(u.element.style.display="block")}))};d(),n(i)},children:[N(Q.Button,{value:"2D",children:"2D"}),N(Q.Button,{value:"3D",children:"3D"})]})})})};export{gt as default};
