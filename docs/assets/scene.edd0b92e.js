var V=Object.defineProperty;var Y=(l,e,t)=>e in l?V(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var o=(l,e,t)=>(Y(l,typeof e!="symbol"?e+"":e,t),t);class m{constructor(e=0,t=e){o(this,"x",0);o(this,"y",0);o(this,"isVector2",!0);this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t=e){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new m(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(t,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,s=this.y-e.y;return t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,s){return this.x=e.x+(t.x-e.x)*s,this.y=e.y+(t.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}rotate(e){const{x:t,y:s}=this,i=Math.cos(e),n=Math.sin(e);return this.x=t*i-s*n,this.y=t*n+s*i,this}rotateAround(e,t){const s=Math.cos(t),i=Math.sin(t),n=this.x-e.x,r=this.y-e.y;return this.x=n*s-r*i+e.x,this.y=n*i+r*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}lookAt(e){const t=new m().subVectors(e,this),s=Math.atan2(t.y,t.x);return s<0?s+Math.PI*2:s}isEmpty(){return this.x!==1/0&&this.y!==1/0}applyMatrix3(e){const t=this.x,s=this.y,i=e.elements;return this.x=i[0]*t+i[3]*s+i[6],this.y=i[1]*t+i[4]*s+i[7],this}*[Symbol.iterator](){yield this.x,yield this.y}}class B{constructor(){o(this,"_listeners",{})}addEventListener(e,t){const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t){const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const i=[...s];for(let n=0,r=i.length;n<r;n++)i[n].call(this,e)}}}const f=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function X(){const l=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(f[l&255]+f[l>>8&255]+f[l>>16&255]+f[l>>24&255]+"-"+f[e&255]+f[e>>8&255]+"-"+f[e>>16&15|64]+f[e>>24&255]+"-"+f[t&63|128]+f[t>>8&255]+"-"+f[t>>16&255]+f[t>>24&255]+f[s&255]+f[s>>8&255]+f[s>>16&255]+f[s>>24&255]).toLowerCase()}class w{constructor(){o(this,"elements",[1,0,0,0,1,0,0,0,1])}set(e,t,s,i,n,r,a,h,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=n,d[5]=h,d[6]=s,d[7]=r,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,s=e.elements;return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const s=e.elements,i=t.elements,n=this.elements,r=s[0],a=s[3],h=s[6],u=s[1],d=s[4],p=s[7],v=s[2],M=s[5],x=s[8],y=i[0],S=i[3],P=i[6],O=i[1],E=i[4],k=i[7],T=i[2],j=i[5],z=i[8];return n[0]=r*y+a*O+h*T,n[3]=r*S+a*E+h*j,n[6]=r*P+a*k+h*z,n[1]=u*y+d*O+p*T,n[4]=u*S+d*E+p*j,n[7]=u*P+d*k+p*z,n[2]=v*y+M*O+x*T,n[5]=v*S+M*E+x*j,n[8]=v*P+M*k+x*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],s=e[1],i=e[2],n=e[3],r=e[4],a=e[5],h=e[6],u=e[7],d=e[8];return t*r*d-t*a*u-s*n*d+s*a*h+i*n*u-i*r*h}invert(){const e=this.elements,t=e[0],s=e[1],i=e[2],n=e[3],r=e[4],a=e[5],h=e[6],u=e[7],d=e[8],p=d*r-a*u,v=a*h-d*n,M=u*n-r*h,x=t*p+s*v+i*M;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/x;return e[0]=p*y,e[1]=(i*u-d*s)*y,e[2]=(a*s-i*r)*y,e[3]=v*y,e[4]=(d*t-i*h)*y,e[5]=(i*n-a*t)*y,e[6]=M*y,e[7]=(s*h-u*t)*y,e[8]=(r*t-s*n)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,s,i,n,r,a){const h=Math.cos(n),u=Math.sin(n);return this.set(s*h,s*u,-s*(h*r+u*a)+r+e,-i*u,i*h,-i*(-u*r+h*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(A.makeScale(e,t)),this}rotate(e){return this.premultiply(A.makeRotation(e)),this}translate(e,t){return this.premultiply(A.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),s=Math.sin(e);return this.set(t,-s,0,s,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,s=e.elements;for(let i=0;i<9;i++)if(t[i]!==s[i])return!1;return!0}fromArray(e,t=0){for(let s=0;s<9;s++)this.elements[s]=e[s+t];return this}clone(){return new w().fromArray(this.elements)}}const A=new w;class W extends B{constructor(){super(...arguments);o(this,"position",new m);o(this,"rotate",0);o(this,"scale",new m(1,1));o(this,"visible",!0);o(this,"index",0);o(this,"name","");o(this,"parent");o(this,"enableCamera",!0);o(this,"uuid",X());o(this,"isObject2D",!0)}get matrix(){const{position:t,rotate:s,scale:i}=this;return new w().scale(i.x,i.y).rotate(s).translate(t.x,t.y)}get worldMatrix(){const{parent:t,matrix:s}=this;return t?t.worldMatrix.multiply(s):s}get pvmMatrix(){const t=this.getScene();if(t){const{camera:s}=t;return new w().multiplyMatrices(s.pvMatrix,this.worldMatrix)}else return this.worldMatrix}get worldScale(){const{scale:t,parent:s}=this;return s?t.clone().multiply(s.worldScale):t}transform(t){const{position:s,rotate:i,scale:n}=this;t.translate(s.x,s.y),t.rotate(i),t.scale(n.x,n.y)}remove(){const{parent:t}=this;t&&t.remove(this)}show(){this.visible=!0}hidden(){this.visible=!1}getScene(){return"isScene"in this?this:this.parent?this.parent.getScene():null}draw(t){!this.visible||(t.save(),this.transform(t),this.drawShape(t),t.restore())}drawShape(t){}crtPath(t,s){}}class q{constructor(){o(this,"shadowColor");o(this,"shadowBlur",0);o(this,"shadowOffsetX",0);o(this,"shadowOffsetY",0);o(this,"globalAlpha");o(this,"globalCompositeOperation");o(this,"clip",!1)}setOption(e={}){Object.assign(this,e)}apply(e){const{globalAlpha:t,globalCompositeOperation:s,shadowColor:i,shadowBlur:n,shadowOffsetX:r,shadowOffsetY:a,clip:h}=this;i&&(e.shadowColor=i,e.shadowBlur=n,e.shadowOffsetX=r,e.shadowOffsetY=a),s&&(e.globalCompositeOperation=s),t!==void 0&&(e.globalAlpha=t),h&&e.clip()}}function Z(l,e,t,s=!1){const i=new m(e[0],e[1]).applyMatrix3(t);l.moveTo(i.x,i.y);for(let n=2,r=e.length;n<r;n+=2){const a=new m(e[n],e[n+1]).applyMatrix3(t);l.lineTo(a.x,a.y)}s&&l.closePath()}function C(l,e,t=!1){const s=new m(e[0],e[1]);l.moveTo(s.x,s.y);for(let i=2,n=e.length;i<n;i+=2){const r=new m(e[i],e[i+1]);l.lineTo(r.x,r.y)}t&&l.closePath()}const H=(l,e)=>{const t=Math.floor(l/e),s=e*t,i=e*(t+1);return l-s<=i-l?s:i},F=l=>{const e=Math.floor(l),t=Math.ceil(l);return(l-e<t-l?e:t)+.5};class _ extends W{constructor(t={}){super();o(this,"image",new Image);o(this,"offset",new m);o(this,"size",new m(300,150));o(this,"view");o(this,"style",new q);o(this,"isImg",!0);this.setOption(t)}setOption(t){for(const[s,i]of Object.entries(t))switch(s){case"src":this.image instanceof Image&&(this.image.src=i);break;case"style":this.style.setOption(i);break;default:this[s]=i}}get moMatrix(){const{offset:{x:t,y:s}}=this;return this.worldMatrix.multiply(new w().makeTranslation(t,s))}get pvmoMatrix(){const{offset:{x:t,y:s}}=this;return this.pvmMatrix.multiply(new w().makeTranslation(t,s))}drawShape(t){const{image:s,offset:i,size:n,view:r,style:a}=this;a.apply(t),r?t.drawImage(s,r.x,r.y,r.width,r.height,i.x,i.y,n.x,n.y):t.drawImage(s,i.x,i.y,n.x,n.y)}crtPath(t,s=this.pvmoMatrix){const{size:{x:i,y:n}}=this;Z(t,[0,0,i,0,i,n,0,n],s,!0)}}const L=Math.PI*2;let g=!1;const c=document.createElement("canvas").getContext("2d");class U{constructor(e={}){o(this,"_img",new _);o(this,"vertives",[]);o(this,"center",new m);o(this,"matrix",new w);o(this,"level","pvmoMatrix");o(this,"strokeStyle","#558ef0");o(this,"fillStyle","#fff");for(const[t,s]of Object.entries(e))this[t]=s}get img(){return this._img}set img(e){this._img=e,this.updateShape()}updateShape(){const{vertives:e,center:t,img:s,level:i,img:{size:{x:n,y:r}}}=this,a=[0,0,n/2,0,n,0,n,r/2,n,r,n/2,r,0,r,0,r/2];this.matrix=s[i];for(let h=0,u=a.length;h<u;h+=2){const{x:d,y:p}=new m(a[h],a[h+1]).applyMatrix3(this.matrix);e[h]=d,e[h+1]=p}t.copy(new m(e[0],e[1]).lerp(new m(e[8],e[9]),.5))}draw(e){this.updateShape();const{img:{size:t},vertives:s,center:i,matrix:n,strokeStyle:r,fillStyle:a}=this,[h,u]=[t.width/2,t.height/2];e.save(),e.strokeStyle=r,e.fillStyle=a,e.beginPath(),C(e,[s[0],s[1],s[4],s[5],s[8],s[9],s[12],s[13]],!0),e.stroke();const{elements:d}=n,p=new m(d[0],d[1]).length(),v=new m(d[3],d[4]).length(),M=new m(8/p,8/v),[x,y]=[M.x/2,M.y/2];e.beginPath();for(let S=0;S<3;S++)for(let P=0;P<3;P++){if(S===1&&P===1)continue;const[O,E]=[h*P,u*S];Z(e,[O-x,E-y,O+x,E-y,O+x,E+y,O-x,E+y],n,!0)}e.fill(),e.stroke(),e.beginPath(),e.arc(i.x,i.y,5,0,L),e.fill(),e.stroke(),e.restore()}getMouseState(e){const{vertives:t}=this,s=new m(t[0]-t[8],t[1]-t[9]).length(),i=Math.min(12,s/3);for(let n=0,r=t.length;n<r;n+=4)if(new m(t[n],t[n+1]).sub(e).length()<i)return"scale";return c.save(),c.lineWidth=i,c.beginPath(),C(c,[t[0],t[1],t[4],t[5]]),g=c.isPointInStroke(e.x,e.y),c.restore(),g||(c.save(),c.lineWidth=i,c.beginPath(),C(c,[t[8],t[9],t[12],t[13]]),g=c.isPointInStroke(e.x,e.y),c.restore(),g)?"scaleY":(c.save(),c.lineWidth=i,c.beginPath(),C(c,[t[12],t[13],t[0],t[1]]),g=c.isPointInStroke(e.x,e.y),c.restore(),g||(c.save(),c.lineWidth=i,c.beginPath(),C(c,[t[4],t[5],t[8],t[9]]),g=c.isPointInStroke(e.x,e.y),c.restore(),g)?"scaleX":(c.beginPath(),C(c,t),c.isPointInPath(e.x,e.y)?"move":(c.save(),c.lineWidth=40,c.beginPath(),C(c,t),c.closePath(),g=c.isPointInStroke(e.x,e.y),c.restore(),g?"rotate":null)))}}class N extends B{constructor(t,s={}){super();o(this,"camera");o(this,"scene");o(this,"enableZoom",!0);o(this,"zoomSpeed",3);o(this,"enablePan",!0);o(this,"panSpeed",1);o(this,"panning",!1);o(this,"minZoom",1/0);o(this,"maxZoom",1/0);o(this,"scaleForMouse",!1);o(this,"stage",{cameraZoom:1,cameraPosition:new m,panStart:new m});o(this,"wheel",t=>{const{deltaY:s,clientX:i,clientY:n}=t,{enableZoom:r,camera:a,zoomSpeed:h}=this;if(!r)return;const u=Math.pow(.95,h);if(s>0){if(a.zoom<this.minZoom)return;a.zoom*=u}else{if(a.zoom>this.maxZoom)return;a.zoom/=u}this.setZoom(new m(i,n));const d={type:"change",target:t};this.dispatchEvent(d)});o(this,"pointerdown",t=>{const{clientX:s,clientY:i}=t,{enablePan:n,stage:{cameraPosition:r,panStart:a},camera:{position:h}}=this;!n||(this.panning=!0,r.copy(h.clone()),a.set(s,i))});o(this,"pointerup",()=>{const{camera:{position:t},stage:{cameraPosition:s}}=this;this.panning=!1,s.copy(t.clone())});o(this,"pointermove",t=>{const{clientX:s,clientY:i}=t,{enablePan:n,camera:{position:r},stage:{panStart:{x:a,y:h},cameraPosition:u},panning:d}=this;if(!n||!d)return;r.copy(u.clone().add(new m(s-a,i-h)));const p={type:"change",target:t};this.dispatchEvent(p)});this.camera=t.camera,this.scene=t,this.setOption(s)}setOption(t){Object.assign(this,t)}setZoom(t){const{camera:s,stage:i}=this;let n=new m;if(t)n=this.scene.clientToCanvas(t.x,t.y);else{const{viewportWidth:a,viewportHeight:h}=this.scene.getViewPort();n.set(a/2,h/2)}const r=n.sub(n.clone().sub(s.position).multiplyScalar(s.zoom).divideScalar(i.cameraZoom));s.position.copy(r.clone()),i.cameraPosition.copy(r.clone()),i.cameraZoom=s.zoom}}const b=window.devicePixelRatio||1;class R{constructor(e=0,t=0,s=1){o(this,"position");o(this,"zoom");this.position=new m(e,t),this.zoom=s}get pvMatrix(){const{position:{x:e,y:t},zoom:s}=this;return new w().translate(e*b,t*b).scale(s*b,s*b)}transformInvert(e){const{position:{x:t,y:s},zoom:i}=this;e.translate(t*b,s*b),e.scale(i*b,i*b)}}class I extends W{constructor(t={}){super();o(this,"children",[]);o(this,"isGroup",!0);this.setOption(t)}setOption(t){Object.assign(this,t)}add(...t){for(const s of t){if(s===this)return this;s.parent&&s.remove(),s.parent=this,this.children.push(s),this.dispatchEvent({type:"add",obj:s})}return this.sort(),this}remove(...t){const{children:s}=this;for(const i of t){const n=s.indexOf(i);if(n!==-1)i.parent=void 0,this.children.splice(n,1),this.dispatchEvent({type:"remove",obj:i});else for(const r of s)r instanceof I&&r.remove(i)}return this}clear(){for(const t of this.children)t.parent=void 0,this.dispatchEvent({type:"removed",obj:t});return this.children=[],this}sort(){const{children:t}=this;t.sort((s,i)=>s.index-i.index);for(const s of t)s instanceof I&&s.sort()}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,s){const{children:i}=this;for(let n=0,r=i.length;n<r;n++){const a=i[n];if(a[t]===s)return a;if(a instanceof I){const h=a.getObjectByProperty(t,s);if(h)return h}}}traverse(t){t(this);const{children:s}=this;for(const i of s)i instanceof I?i.traverse(t):t(i)}traverseVisible(t){if(!this.visible)return;t(this);const{children:s}=this;for(const i of s)!i.visible||(i instanceof I?i.traverse(t):t(i))}drawShape(t){const{children:s}=this;for(const i of s)i.draw(t)}}class J extends I{constructor(t={}){super();o(this,"width");o(this,"height");o(this,"_domElement",document.createElement("canvas"));o(this,"ctx",this._domElement.getContext("2d"));o(this,"camera",new R);o(this,"autoClear",!0);o(this,"isCenter",!0);o(this,"isScene",!0);this.setOption(t)}get domElement(){return this._domElement}set domElement(t){if(this._domElement===t)return;this._domElement=t;const s=this._domElement.parentElement;if(!s)return;const i=s.clientWidth,n=s.clientHeight;this.setViewPort(i,n),this.isCenter&&this.camera.position.set(i/2,n/2)}setViewPort(t,s){this.domElement.style.width=t+"px",this.domElement.style.height=s+"px",this.domElement.width=t*b,this.domElement.height=s*b,this.ctx=this.domElement.getContext("2d")}getViewPort(){return{width:this.domElement.width,height:this.domElement.height,viewportWidth:this.domElement.clientWidth,viewportHeight:this.domElement.clientHeight}}setOption(t){for(const[s,i]of Object.entries(t))this[s]=i}render(){const{domElement:{width:t,height:s},ctx:i,camera:n,children:r,autoClear:a}=this;i.save(),i.setTransform(1,0,0,1,0,0),a&&i.clearRect(0,0,t,s),i.fillStyle="#f4f4f4",i.fillRect(0,0,t,s);for(const h of r)i.save(),h.enableCamera&&n.transformInvert(i),h.draw(i),i.restore();i.restore()}clientToCanvas(t,s){const{domElement:i}=this,{left:n,top:r}=i.getBoundingClientRect();return new m(t-n,s-r)}canvasToClient(t,s){const{domElement:i}=this,{left:n,top:r}=i.getBoundingClientRect();return new m(t+n,s+r)}canvastoClip({x:t,y:s}){const{position:i}=this;return new m(t-i.x,s-i.y)}clientToClip(t,s){return this.canvastoClip(this.clientToCanvas(t,s))}clientToCoord(t,s){const{camera:{zoom:i,position:n}}=this;return this.canvastoClip(this.clientToCanvas(t,s)).sub(n).divideScalar(i)}isPointInObj(t,s,i=new w){const{ctx:n}=this;return n.save(),n.beginPath(),t.crtPath(n,i),n.restore(),n.isPointInPath(s.x,s.y)}selectObj(t,s=this.children){for(const i of[...s].reverse())if(i instanceof _&&this.isPointInObj(i,t,i.pvmoMatrix))return i;return null}}export{q as B,U as F,_ as I,w as M,W as O,J as S,m as V,N as a,C as c,b as d,H as g,F as n};
